(function(n,f){"function"===typeof define&&define.amd?define([],f):"object"===typeof module&&module.exports?module.exports=f():n.Rellax=f()})("undefined"!==typeof window?window:global,function(){var n=function(f,x){var a=Object.create(n.prototype),h=0,r=0,p=0,t=0,d=[],u=!0,A=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){return setTimeout(a,1E3/60)},m=null,y=!1;try{var l=
Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("testPassive",null,l);window.removeEventListener("testPassive",null,l)}catch(c){}var E=window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout,F=window.transformProp||function(){var a=document.createElement("div");if(null===a.style.transform){var b=["Webkit","Moz","ms"],e;for(e in b)if(void 0!==a.style[b[e]+"Transform"])return b[e]+"Transform"}return"transform"}();a.options={speed:-2,center:!1,wrapper:null,
relativeToWrapper:!1,round:!0,vertical:!0,horizontal:!1,callback:function(){}};x&&Object.keys(x).forEach(function(c){a.options[c]=x[c]});f||(f=".rellax");l="string"===typeof f?document.querySelectorAll(f):Array.isArray(f)?f:[f];if(0<l.length){a.elems=l;if(a.options.wrapper&&!a.options.wrapper.nodeType)if(l=document.querySelector(a.options.wrapper))a.options.wrapper=l;else{console.warn("Rellax: The wrapper you're trying to use doesn't exist.");return}var w=function(){for(var c=0;c<d.length;c++)a.elems[c].style.cssText=
d[c].style;d=[];r=window.innerHeight;t=window.innerWidth;B();for(c=0;c<a.elems.length;c++){var b=a.elems[c],e=b.getAttribute("data-rellax-percentage"),v=b.getAttribute("data-rellax-speed"),f=b.getAttribute("data-rellax-zindex")||0,k=b.getAttribute("data-rellax-min"),l=b.getAttribute("data-rellax-max"),h=a.options.wrapper?a.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;a.options.relativeToWrapper&&(h=(window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop)-a.options.wrapper.offsetTop);var g=a.options.vertical?e||a.options.center?h:0:0,q=a.options.horizontal?e||a.options.center?a.options.wrapper?a.options.wrapper.scrollLeft:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0:0;h=g+b.getBoundingClientRect().top;var m=b.clientHeight||b.offsetHeight||b.scrollHeight,n=q+b.getBoundingClientRect().left,p=b.clientWidth||b.offsetWidth||b.scrollWidth;g=e?e:(g-h+r)/(m+r);e=e?e:(q-n+t)/(p+t);a.options.center&&
(g=e=.5);v=v?v:a.options.speed;e=C(e,g,v);b=b.style.cssText;g="";if(q=/transform\s*:/i.exec(b))g=b.slice(q.index),g=(q=g.indexOf(";"))?" "+g.slice(11,q).replace(/\s/g,""):" "+g.slice(11).replace(/\s/g,"");d.push({baseX:e.x,baseY:e.y,top:h,left:n,height:m,width:p,speed:v,style:b,transform:g,zindex:f,min:k,max:l})}D();u&&(window.addEventListener("resize",w),u=!1,z())},B=function(){var c=h,b=p;h=a.options.wrapper?a.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||
window.pageYOffset;p=a.options.wrapper?a.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset;a.options.relativeToWrapper&&(h=((document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset)-a.options.wrapper.offsetTop);return c!=h&&a.options.vertical||b!=p&&a.options.horizontal?!0:!1},C=function(c,b,e){var d={};c=100*e*(1-c);b=100*e*(1-b);d.x=a.options.round?Math.round(c):Math.round(100*c)/
100;d.y=a.options.round?Math.round(b):Math.round(100*b)/100;return d},k=function(){window.removeEventListener("resize",k);window.removeEventListener("orientationchange",k);(a.options.wrapper?a.options.wrapper:window).removeEventListener("scroll",k);(a.options.wrapper?a.options.wrapper:document).removeEventListener("touchmove",k);m=A(z)},z=function(){B()&&!1===u?(D(),m=A(z)):(m=null,window.addEventListener("resize",k),window.addEventListener("orientationchange",k),(a.options.wrapper?a.options.wrapper:
window).addEventListener("scroll",k,y?{passive:!0}:!1),(a.options.wrapper?a.options.wrapper:document).addEventListener("touchmove",k,y?{passive:!0}:!1))},D=function(){for(var c,b=0;b<a.elems.length;b++){c=C((p-d[b].left+t)/(d[b].width+t),(h-d[b].top+r)/(d[b].height+r),d[b].speed);var e=c.y-d[b].baseY,f=c.x-d[b].baseX;null!==d[b].min&&(a.options.vertical&&!a.options.horizontal&&(e=e<=d[b].min?d[b].min:e),a.options.horizontal&&!a.options.vertical&&(f=f<=d[b].min?d[b].min:f));null!==d[b].max&&(a.options.vertical&&
!a.options.horizontal&&(e=e>=d[b].max?d[b].max:e),a.options.horizontal&&!a.options.vertical&&(f=f>=d[b].max?d[b].max:f));a.elems[b].style[F]="translate3d("+(a.options.horizontal?f:"0")+"px,"+(a.options.vertical?e:"0")+"px,"+d[b].zindex+"px) "+d[b].transform}a.options.callback(c)};a.destroy=function(){for(var c=0;c<a.elems.length;c++)a.elems[c].style.cssText=d[c].style;u||(window.removeEventListener("resize",w),u=!0);E(m);m=null};w();a.refresh=w;return a}console.warn("Rellax: The elements you're trying to select don't exist.")};
return n});